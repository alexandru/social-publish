openapi: 3.0.3
info:
  title: Social Publish API
  description: API for publishing posts to social media platforms
  version: 1.0.0
servers:
  - url: /api
    description: API endpoints
paths:
  /ping:
    get:
      summary: Health check endpoint
      description: Returns "pong" to indicate the server is running
      responses:
        '200':
          description: Successful response
          content:
            text/plain:
              schema:
                type: string
                example: pong
  /login:
    post:
      summary: User login
      description: Authenticate user and get JWT token
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - username
                - password
              properties:
                username:
                  type: string
                password:
                  type: string
      responses:
        '200':
          description: Successful login
          content:
            application/json:
              schema:
                type: object
                properties:
                  token:
                    type: string
        '401':
          description: Unauthorized
  /rss/post:
    post:
      summary: Create RSS post
      description: Create a new RSS feed post
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - title
                - content
              properties:
                title:
                  type: string
                  description: Post title
                content:
                  type: string
                  description: Post content in HTML format
                description:
                  type: string
                  description: Optional post description
      responses:
        '200':
          description: Post created successfully
        '401':
          description: Unauthorized
  /bluesky/post:
    post:
      summary: Create Bluesky post
      description: Publish a post to Bluesky
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - text
              properties:
                text:
                  type: string
                  description: Post text content
                images:
                  type: array
                  description: Optional image attachments
                  items:
                    type: string
      responses:
        '200':
          description: Post created successfully
        '401':
          description: Unauthorized
        '503':
          description: Service unavailable - integration not configured
  /mastodon/post:
    post:
      summary: Create Mastodon post
      description: Publish a post to Mastodon
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - status
              properties:
                status:
                  type: string
                  description: Post status/content
                mediaIds:
                  type: array
                  description: Optional media attachment IDs
                  items:
                    type: string
      responses:
        '200':
          description: Post created successfully
        '401':
          description: Unauthorized
        '503':
          description: Service unavailable - integration not configured
  /twitter/post:
    post:
      summary: Create Twitter post
      description: Publish a post to Twitter/X
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - text
              properties:
                text:
                  type: string
                  description: Tweet text content
                mediaIds:
                  type: array
                  description: Optional media attachment IDs
                  items:
                    type: string
      responses:
        '200':
          description: Post created successfully
        '401':
          description: Unauthorized
        '503':
          description: Service unavailable - integration not configured
  /linkedin/post:
    post:
      summary: Create LinkedIn post
      description: Publish a post to LinkedIn
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - text
              properties:
                text:
                  type: string
                  description: Post text content
                mediaUrls:
                  type: array
                  description: Optional media URLs
                  items:
                    type: string
      responses:
        '200':
          description: Post created successfully
        '401':
          description: Unauthorized
        '503':
          description: Service unavailable - integration not configured
  /multiple/post:
    post:
      summary: Broadcast post to multiple platforms
      description: Publish a post to multiple social media platforms at once
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - text
                - targets
              properties:
                text:
                  type: string
                  description: Post text content
                targets:
                  type: array
                  description: Target platforms (e.g., bluesky, mastodon, twitter, linkedin)
                  items:
                    type: string
                mediaIds:
                  type: array
                  description: Optional media attachment IDs
                  items:
                    type: string
      responses:
        '200':
          description: Posts created successfully
        '401':
          description: Unauthorized
  /files/upload:
    post:
      summary: Upload file
      description: Upload a file for use in posts
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                file:
                  type: string
                  format: binary
      responses:
        '200':
          description: File uploaded successfully
        '401':
          description: Unauthorized
components:
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
